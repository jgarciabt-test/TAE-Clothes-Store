package com.tae.store.utilities;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.IBinder;

public class NetworkCheckService extends Service {

	String status;
	boolean netStatus;
	NetworkCheckThread networkCheckThread;

	public IBinder onBind(Intent intent) {
		// TODO Auto-generated method stub

		return null;
	}

	/**
	 * 
	 */
	@Override
	public int onStartCommand(Intent intent, int flags, int startId) {
		// TODO Auto-generated method stub
		networkCheckThread = new NetworkCheckThread();
		networkCheckThread.start();
		return 0;
	}

	/**
	 * service destroy method for clean up actions
	 */
	@Override
	public void onDestroy() {
		// TODO Auto-generated method stub
		networkCheckThread.stopThread();
		super.onDestroy();
	}

	/**
		 * 
		 * 
		 *
		 */
	class NetworkCheckThread extends Thread {
		/**
			 * 
			 */

		public NetworkCheckThread() {
			super();
		}

		/**
		 * stop thread method
		 */
		public void stopThread() {

		}

		@Override
		public void run() {
			// TODO Auto-generated method stub
			super.run();

			while (true) {

				status = NetworkUtil
						.getConnectivityStatusString(getApplicationContext());

				sendBroadcast(new Intent().putExtra("networkstatus", status)
						.setAction("statusUpdate"));

				try {
					Thread.sleep(5000);
				} catch (InterruptedException e) {
					e.printStackTrace();
				}
			}

		}

	}

}
